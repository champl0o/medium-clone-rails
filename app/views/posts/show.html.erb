<p id="notice"><%= notice %></p>

<div class="card">
  <div class="card-header">
    <h5 class="text-muted">By <%= @post.user.email %></h5>
    <h6 class="text-muted">Created at <%= @post.created_at.strftime("%Y-%m-%d") %></h6>
  </div>
  <div class="card-body">
    <h5 class="card-title"><%= @post.title %></h5>
    <p class="card-text"><%= @post.content %></p>
    <%= link_to 'Show', @post, class: "btn btn-primary" %>
    <%= link_to 'Edit', edit_post_path(@post), class: "btn btn-primary" %>
    <%= link_to 'Destroy', @post, method: :delete, class: "btn btn-primary", data: { confirm: 'Are you sure?' } %>
    <%= link_to 'New Post', new_post_path, class: "btn btn-primary" %>
  </div>
  <div class="card-footer">
    <ul class="list-inline">
      <% @post.tags.each do |tag| %>
          <li class="list-inline-item">
            <%= link_to tag.title, filter_path(tag_title: tag.title)%>
          </li>
      <% end %>
    </ul>
    <hr>

    <h2>Comments</h2>
    <%= render @post.comments %>

    <h2>Add a comment:</h2>
    <%= form_with model: [ @post, @post.comments.build ] do |form| %>
      <p class="field form-group">
        <%= form.text_field :user_id, id: :comment_user_id, type: :hidden, value: current_user.id, class: "form-control" %>
      </p>
      <p class="field form-group">
        <%= form.label "Write your comment" %>
        <%= form.text_area :body, class: "form-control" %>
      </p>
      <p class="field form-group">
        <%= form.submit %>
      </p>
    <% end %>
  </div>
</div>
<br>

<%= link_to 'Edit', edit_post_path(@post) %> |
<%= link_to 'Back', posts_path %>
